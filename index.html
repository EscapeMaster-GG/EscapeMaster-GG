<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistem Rekomendasi Ruangan</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h2 { text-align: center; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input, textarea { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; }
    button { margin-top: 15px; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; }
    .btn-primary { background: #4f46e5; color: white; }
    .btn-reset { background: #ddd; margin-left: 10px; }
    .result { margin-top: 20px; padding: 15px; border-radius: 8px; background: #f1f5f9; }
    .highlight { background: #d1fae5; padding: 10px; margin-top: 10px; border-radius: 5px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h2>üîç Escape Master Ruangan üîç</h2>
    
    <label>Global Counts (pisahkan dengan koma)</label>
    <input type="text" id="globalCounts" value="">
    
    <label>Recent List (pisahkan dengan koma)</label>
    <textarea id="recentList"></textarea>
    
    <label>Bobot Recent</label>
    <input type="number" id="bobotRecent" value="0.7" step="0.1" min="0" max="1">
    
    <label>Bobot Global</label>
    <input type="number" id="bobotGlobal" value="0.3" step="0.1" min="0" max="1">
    
    <div>
      <button class="btn-primary" onclick="tampilkanRekomendasi()">Tampilkan Rekomendasi</button>
      <button class="btn-reset" onclick="resetForm()">Reset</button>
    </div>
    
    <div id="hasil" class="result" style="display:none;"></div>
  </div>

  <script>
    function tampilkanRekomendasi() {
      let globalCounts = document.getElementById("globalCounts").value.split(",").map(Number);
      let recentList = document.getElementById("recentList").value.split(",");
      let bobotRecent = parseFloat(document.getElementById("bobotRecent").value);
      let bobotGlobal = parseFloat(document.getElementById("bobotGlobal").value);
      
      // Daftar ruangan sesuai urutan yang kamu kasih
      let rooms = [
        "Ruang utilitas",
        "Ruang rapat",
        "Kantor Direktur Pabrik",
        "Ruang diskusi",
        "Ruang pemantauan",
        "Ruang kerja",
        "Kantor keuangan",
        "Ruang HRD"
      ];
      
      let scores = {};
      rooms.forEach((room, i) => {
        let globalScore = globalCounts[i] ? globalCounts[i] : 0;
        let recentScore = recentList.filter(r => r.trim() === room).length;
        let finalScore = (recentScore * bobotRecent) + (globalScore * bobotGlobal);
        scores[room] = finalScore.toFixed(4);
      });
      
      let sorted = Object.entries(scores).sort((a,b) => a[1] - b[1]);
      
      let output = "<h3>Hasil Rekomendasi</h3><ul>";
      sorted.forEach(([room, score]) => {
        output += `<li>${room}: ${score}</li>`;
      });
      output += "</ul>";
      
      let best = sorted[0];
      output += `<div class="highlight">Rekomendasi: masuk ke <b>${best[0]}</b> (risk ${best[1]}) ‚úÖ</div>`;
      
      document.getElementById("hasil").style.display = "block";
      document.getElementById("hasil").innerHTML = output;
    }
    
    function resetForm() {
      document.getElementById("globalCounts").value = "";
      document.getElementById("recentList").value = "";
      document.getElementById("bobotRecent").value = 0.7;
      document.getElementById("bobotGlobal").value = 0.3;
      document.getElementById("hasil").style.display = "none";
    }
  </script>
</body>
</html>